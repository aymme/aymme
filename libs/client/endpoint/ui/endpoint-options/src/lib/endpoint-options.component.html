<div class="flex flex-row align-items-center border-bottom-1 py-2 px-3 justify-content-between border-gray-300">
  <span>DETAILS</span>
  <button pButton type="button" label="Update" (click)="updateEndpoint()"></button>
</div>
<p-tabView [formGroup]="form">
  <p-tabPanel header="Configuration">
    <div class="formgrid grid p-2">
      <div class="field col-4">
        <label class="block">Active Status</label>
        <p-dropdown
          *ngIf="availableStatusCodes"
          inputId="activeStatus"
          [options]="availableStatusCodes"
          formControlName="activeStatusCode"
          optionLabel="statusCode"
          optionValue="id"
          [style]="{ width: '100%' }"
        >
        </p-dropdown>
      </div>
      <div class="field col-4">
        <label for="delay" class="block">Delay</label>
        <input type="text" id="delay" pInputText pKeyFilter="pnum" class="w-full" formControlName="delay" />
      </div>
      <div class="field col-2">
        <label class="flex align-items-center">
          Empty
          <i
            class="ml-1 pi pi-question-circle"
            pTooltip="If enabled it will return an empty array"
            tooltipPosition="top"
          ></i>
        </label>
        <p-inputSwitch formControlName="emptyArray"></p-inputSwitch>
      </div>
      <div class="field col-2">
        <label class="flex align-items-center"
          >Forward
          <i
            class="ml-1 pi pi-question-circle"
            pTooltip="Forward the request to the original service"
            tooltipPosition="top"
          ></i>
        </label>
        <p-inputSwitch
          pTooltip="[WIP] Forward the request to the original service"
          tooltipPosition="top"
          [disabled]="true"
        ></p-inputSwitch>
      </div>
    </div>
  </p-tabPanel>
  <p-tabPanel header="Headers">
    <ng-container formArrayName="headers">
      <ng-container *ngFor="let _ of headersControl.controls; index as i">
        <div class="formgroup-inline" [formGroupName]="i">
          <div class="field">
            <input type="text" [id]="'header-name-' + i" pInputText placeholder="Header name" formControlName="name" />
          </div>
          <div class="field">
            <input type="text" id="header-value-1" pInputText placeholder="Header value" formControlName="value" />
          </div>
          <button
            pButton
            type="button"
            icon="pi pi-times"
            class="p-button-rounded p-button-danger p-button-text"
            (click)="removeExistingHeader(i)"
          ></button>
        </div>
      </ng-container>
    </ng-container>
    <div>
      <button
        pButton
        pRipple
        type="button"
        icon="pi pi-plus"
        class="p-button-secondary p-button-text w-full"
        (click)="addNewHeader()"
      ></button>
    </div>
  </p-tabPanel>
</p-tabView>
