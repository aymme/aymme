<section class="relative flex flex-col items-center pt-10">
  <article class="w-1/2 rounded-md">
    <header class="border-bp-5 mb-5 flex flex-row items-center justify-center p-5">
      <h2 class="m-0 text-lg font-extralight">Current <strong>Projects</strong></h2>

      <button class="ml-auto" type="button" (click)="showDialog()" icon="pi pi-plus" label="New project">
        <i class="fas fa-plus"></i>
      </button>
    </header>

    <section>
      <ng-container *ngIf="loaded$ | async; then loadedProjects; else loadingProjects"></ng-container>
    </section>
  </article>

  <article
    class="dark:bg-background absolute min-h-full w-1/2 rounded-lg bg-white"
    *ngIf="displayAddNewProject$ | async"
  >
    <header class="mb-5 flex flex-col items-center justify-center pb-5">
      <h3 class="mb-5 pt-3 text-lg">
        Add a new project
        <button class="absolute right-1 top-0 p-2" (click)="hideDialog()"><i class="fa fa-times"></i></button>
      </h3>
      <p class="text-center text-base leading-6">
        Add a new project by providing the project name. <br />
        <em class="text-sm">You cannot have multiple projects with the same name.</em>
      </p>
    </header>

    <div class="mb-5 flex flex-col items-center">
      <label class="mb-2 font-bold" for="projectName">Name</label>
      <input
        id="projectName"
        type="text"
        aria-describedby="projectName-help"
        class="mb-3 rounded-md"
        [(ngModel)]="newProjectName"
        autofocus
        placeholder="project name.."
      />

      <p class="text-sm text-red-500" *ngIf="showError$ | async as error">{{ error }}</p>
    </div>

    <footer class="flex flex-row items-center justify-center">
      <button
        class="dark:border-blend-50 hover:dark:bg-blend-100 rounded-md border border-gray-200 p-3 hover:bg-gray-100"
        type="button"
        label="Confirm"
        (click)="createNewProject()"
      >
        Create Project
      </button>
    </footer>
  </article>
</section>

<ng-template #loadingProjects>
  <section class="p-5 pt-7 text-center text-sm">
    <ay-loader><p>Loading projects..</p></ay-loader>
  </section>
</ng-template>

<ng-template #loadedProjects>
  <ng-container *ngIf="projects$ | async as projects">
    <ay-projects-list
      [projects]="projects"
      (deleteProject)="deleteProject($event)"
      (openProject)="openProject($event)"
    ></ay-projects-list>
  </ng-container>
</ng-template>
